---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/header_ui.astro';
import Footer from '../components/footer_ui.astro';
import FormattedDate from '../components/FormattedDate.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en">
	<head>
		<BaseHead title={title} description={description} />
		<style>
			main {
				width: 100%;
				max-width: 100%;
				margin: 0;
				padding: 0;
			}
			
			.hero-image {
				width: 100%;
				margin-bottom: 3rem;
			}
			
			.hero-image img {
				display: block;
				margin: 0 auto;
				border-radius: 16px;
				box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8),
				           0 0 0 1px rgba(255, 255, 255, 0.05);
				transition: all 0.3s ease;
				max-width: 1200px;
				width: 100%;
			}
			
			.hero-image img:hover {
				transform: translateY(-2px);
				box-shadow: 0 32px 64px -12px rgba(0, 0, 0, 0.9),
				           0 0 0 1px rgba(255, 255, 255, 0.08);
			}
			
			.prose {
				width: 100%;
				max-width: 800px;
				margin: 0 auto;
				padding: 0 2rem;
				color: #e5e7eb;
				line-height: 1.7;
			}
			
			.title {
				margin-bottom: 3rem;
				padding: 2rem 0;
				text-align: center;
				border-bottom: 1px solid rgba(255, 255, 255, 0.1);
			}
			
			.title h1 {
				margin: 0;
				font-size: clamp(2rem, 5vw, 3.5rem);
				font-weight: 700;
				line-height: 1.1;
				letter-spacing: -0.025em;
				background: linear-gradient(135deg, #ffffff 0%, #a1a1aa 100%);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				background-clip: text;
				margin-bottom: 1.5rem;
			}
			
			.date-container {
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 0.5rem;
				margin-bottom: 2rem;
			}
			
			.date {
				font-size: 0.875rem;
				color: #9ca3af;
				font-weight: 500;
				letter-spacing: 0.025em;
				text-transform: uppercase;
				display: inline-flex;
				align-items: center;
				gap: 0.5rem;
			}
			
			.date::before {
				content: '';
				width: 6px;
				height: 6px;
				border-radius: 50%;
				background: linear-gradient(135deg, #3b82f6, #8b5cf6);
				display: inline-block;
			}
			
			.last-updated-on {
				font-style: italic;
				font-size: 0.8rem;
				color: #6b7280;
				font-weight: 400;
				letter-spacing: 0.01em;
			}
			
			.divider {
				width: 60px;
				height: 1px;
				background: linear-gradient(90deg, transparent, #3b82f6, transparent);
				margin: 0 auto;
				opacity: 0.7;
			}
			
			/* Responsive design */
			@media (max-width: 768px) {
				.prose {
					padding: 0 1.5rem;
				}
				
				.title {
					padding: 1.5rem 0;
				}
				
				.title h1 {
					font-size: 2rem;
				}
				
				.hero-image {
					margin-bottom: 2rem;
				}
				
				.hero-image img {
					border-radius: 12px;
				}
			}
			
			/* Mejoras tipogr√°ficas globales */
			.prose :global(h2) {
				font-size: 1.875rem;
				font-weight: 600;
				color: #f9fafb;
				margin-top: 2.5rem;
				margin-bottom: 1rem;
				line-height: 1.3;
			}
			
			.prose :global(h3) {
				font-size: 1.5rem;
				font-weight: 600;
				color: #f3f4f6;
				margin-top: 2rem;
				margin-bottom: 0.75rem;
				line-height: 1.4;
			}
			
			.prose :global(p) {
				margin-bottom: 1.5rem;
				color: #d1d5db;
				font-size: 1.125rem;
				line-height: 1.7;
			}
			
			.prose :global(a) {
				color: #60a5fa;
				text-decoration: none;
				font-weight: 500;
				transition: color 0.2s ease;
			}
			
			.prose :global(a:hover) {
				color: #93c5fd;
				text-decoration: underline;
			}
			
			.prose :global(code) {
				background: rgba(55, 65, 81, 0.5);
				border: 1px solid rgba(75, 85, 99, 0.3);
				border-radius: 6px;
				padding: 0.25rem 0.5rem;
				font-size: 0.875rem;
				color: #fbbf24;
				font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
			}
			
			.prose :global(blockquote) {
				border-left: 4px solid #3b82f6;
				background: rgba(59, 130, 246, 0.05);
				padding: 1rem 1.5rem;
				margin: 2rem 0;
				border-radius: 0 8px 8px 0;
				font-style: italic;
				color: #cbd5e1;
			}
			.spline-container {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				z-index: -1;
			}
		</style>
	</head>

  <body
   class="antialiased text-gray-200 bg-[#0a0a0a] font-inter selection:bg-indigo-600 selection:text-white">
    <Header />

	<div class="spline-container">
      <iframe src="https://my.spline.design/thresholddarkambientui-v0gkZCfi6zXm69kE0wccy70f/" frameborder="0" width="100%" height="100%" class="w-full h-full"></iframe>
    </div>
	
    <main class="w-full ">
      <article class="mx-auto ">
        <!-- Hero -->
        {heroImage && (
          <div class="relative w-full fade-in">
            <img
              width={1280}
              height={640}
              src={heroImage}
              alt=""
              class="block w-full object-cover rounded-2xl shadow-2xl mx-auto max-h-[40rem]"
            />
            <!-- Soft gradient overlay -->
            <div class="pointer-events-none absolute inset-0 rounded-2xl bg-gradient-to-b from-transparent via-black/20 to-black"></div>
          </div>
        )}

        <!-- Header -->
        <header class="max-w-3xl mx-auto px-6 lg:px-0 my-12 text-center stagger">
          <div class="inline-flex items-center gap-2 text-sm uppercase tracking-widest text-gray-400 font-medium slide-up">
            <i data-lucide="calendar" class="w-4 h-4"></i>
            <FormattedDate date={pubDate} />
          </div>

          {updatedDate && (
            <div class="mt-1 text-xs text-gray-500 italic slide-up">
              Last updated on&nbsp;<FormattedDate date={updatedDate} />
            </div>
          )}

          <h1
            class="mt-6 text-4xl sm:text-5xl lg:text-6xl font-semibold tracking-tight bg-gradient-to-br from-white via-gray-300 to-gray-500 bg-clip-text text-transparent slide-up"
          >
            {title}
          </h1>

          <div class="mt-8 h-px w-24 mx-auto bg-gradient-to-r from-transparent via-indigo-600 to-transparent opacity-70 slide-up"></div>
        </header>

        <!-- Content -->
        <section class="backdrop-blur-md max-w-3xl mx-auto prose prose-invert px-6 lg:px-0 mb-24 fade-in">
          <slot />
        </section>
      </article>
    </main>

    <Footer />

    <script type="module">
      lucide.createIcons();
      // Staggered fade-in on load
      addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.stagger > *').forEach(el => el.classList.add('fade-in'));
      });
    </script>
  </body>
</html>
